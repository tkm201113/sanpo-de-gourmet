<div class="mypage" data-controller="review-change">
  <h2>マイページ</h2>
  <div class="user-profile">
    <img src="<%= image_path('kkrn_icon_user_5.png') %>" alt="User Image" class="user-image">
    <p><%= @user.name %></p>
  </div>

  <div class="review-list">
    <p>レビュー一覧</p>
    <hr class="underline">
    
    <% @reviews.each do |review| %>
      <div class="review-item">
        <img src="<%= image_path('kkrn_icon_user_5.png') %>" alt="Review Image" class="review-image">
        <div class="review-content">
          <p><%= review.store_name %></p>
          <p>★★★★★</p>
          <p class="review-text"><%= review.review %></p>
        </div>
        <div class="review-summary">
          <p>サービス : <%= review.service %></p>
          <p>価格 : <%= review.price %></p>
          <p>雰囲気 : <%= review.atmosphere %></p>
        </div>
      </div>
    <% end %>

    <div class="review-actions">
      <button data-action="click->review-change#open">編集</button>
      <button class="delete-button" data-action="click->review-change#confirmDelete">削除</button>
    </div>
  </div>

  <div class="overlay" data-review-change-target="overlay" data-action="click->review-change#close"></div>

  <div id="review-form" class="review-form" data-review-change-target="form">
    <div class="review-form-content">
      <div class="user-profile">
        <img src="<%= image_path('kkrn_icon_user_5.png') %>" alt="User Image" class="user-image">
        <p>ユーザー名: <%= @user.name %></p>
      </div>
      <div class="form-group">
        <label for="rating">評価:</label>
        <div class="stars">
          <% (1..5).each do |i| %>
            <span class="star" data-value="<%= i %>">&#9733;</span>
          <% end %>
        </div>
      </div>
      <div class="form-group">
        <label for="review">レビュー:</label>
        <textarea id="review"></textarea>
      </div>
      <div class="form-group">
        <label for="image">画像:</label>
        <input type="file" id="image">
      </div>
      <div class="form-group">
        <button data-action="click->review-change#close">閉じる</button>
        <button>投稿する</button>
      </div>
    </div>
  </div>

  <div id="delete-confirm" class="review-form" data-review-change-target="deleteConfirm">
    <div class="review-form-content">
      <p>このレビューを削除しますか？</p>
      <div class="review-actions">
        <button data-action="click->review-change#close">キャンセル</button>
        <button class="delete-button">削除する</button>
      </div>
    </div>
  </div>
</div>
